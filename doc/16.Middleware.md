# 미들웨어의 정의
- 미들웨어란 요청을 가로채 응답을 제공하는 기능.
- 스프링에서는 AOP개념으로 접근하던 그것.
- 하나의 함수로 여러 작업에 전부 접근해 할 일을 한다.

# 선언법
```python
@app.middleware("http")
async def add_middleware(request: Request, call_next):
    # call next 는 다음 미들웨어 또는 엔드포인트를 의미한다.
    ...
    response = await call_next(request)
    ...
    return response
```
# 심화 예시
```python
@app.middleware("http")
async def add_middleware(request: Request, call_next):
    start_time = time.time()
    response:Response = await call_next(request)
    duration = time.time() - start_time
    response.headers["duration"] = str(duration)
    return response
```