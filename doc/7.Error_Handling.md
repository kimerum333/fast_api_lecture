# Exception
## 기본적인 예외 객체의 생김새
```python
raise HTTPException(
    status_code=status.HTTP_404_NOT_FOUND,
    detail = f"User with id = {id} not found",
    )
```
## Custom Exception
- 중요 포인트
    1. Exception 을 상속해야 함
    2. 커스텀 에러 핸들러를 등록해야 함.

```python
class StoryException(Exception):
    def __init__(self, name: str):
        self.name = name
```
```python
# main
@app.exception_handler(StoryException)
def story_exception_handler(request: Request, exc: StoryException):
    return JSONResponse(
        status_code=status.HTTP_418_IM_A_TEAPOT,
        content={"detail": exc.name},
    )
```

```python
# 발생시키기
def create_article(db: Session, request: ArticleBase):
    if request.content.startswith("Once upon a time"): 
        raise StoryException("No story please") #여기
    new_article = DbArticle(
        title=request.title,
        content=request.content,
        published=request.published,
        user_id=request.creator_id,
    )
    db.add(new_article)
    db.commit()
    db.refresh(new_article)
    return new_article
```