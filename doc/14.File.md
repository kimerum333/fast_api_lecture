# 파일 다루기
## 파일
- 파일은 폼 데이터와 비슷한 형태로 선언된다.
- 기본은 순수 바이트 형태로 받는 것. 이 경우, 여러가지 구현을 손수 해야 한다.
```python
from fastapi import File
def get_file(file:bytes = File(...)):
    # 이후 이 바이트를 적절히 decode 해서 사용하면 된다.
    content = file.decode("utf-8") # 텍스트 파일이라 가정해 utf 로 디코딩하는 예
```

## 업로드파일
- 업로드된 파일을 다루기 위한 래퍼 객체
```python
from fastapi import UploadFile

@router.post("/uploadfile")
def get_uploadfile(upload_file: UploadFile = File(...)):
    path = f"files/{upload_file.filename}"  # 이 래퍼는 filename 같은 속성에 접근 가능
    with open(path, "w+b") as buffer:
        shutil.copyfileobj(upload_file.file, buffer) # 쉘 유틸을 사용해 복사
    return {
        "filename": path, 
        "type": upload_file.content_type, 
    }

```
## Static 파일로 접근
- aiofiles 라이브러리 활용.
```python
app.mount(
    "/file",  # 외부 진입점
    StaticFiles(directory="files"),  # 실제 파일 경로
    name="files2", # 내부 호칭
)
```

## FileResponse
```python
@router.get("/download/{name}", response_class=FileResponse)  # FileResponse
def download_file(name: str):
    path = f"files/{name}"
    return path
```